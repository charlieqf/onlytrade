# 实时行情获取方案：A股与美股

## 1. 美股市场 (实时)

| 提供商 | 成本 (预估) | 实时性/延迟 | 核心优劣势 |
| :--- | :--- | :--- | :--- |
| **Alpaca** | 免费 (IEX) / $99/月 | < 1秒 | 极致的 Python SDK 支持。免费版使用 IEX 数据（交易量小但实时）。 |
| **Polygon.io** | $29 - $100+/月 | ~20ms | 行业标杆。支持高速 WebSocket，无限次 API 调用。 |
| **Finnhub** | 免费 / $29/月 | ~1秒 | 综合性强，包含股票、加密货币和财经新闻。 |
| **FMP** | $19.99/月 | ~100ms | 个人开发者性价比最高，接口覆盖面广。 |

---

## 2. A股市场 (实时)

| 提供商 | 成本 (预估) | 实时性/延迟 | 核心优劣势 |
| :--- | :--- | :--- | :--- |
| **iTick** | 免费 / 专业版 | < 500ms | 2025年推荐。支持 WebSocket，毫秒级更新。 |
| **Tushare Pro** | 积分制 / 捐赠 | 1-3秒 | 社区化运作，稳定。需通过实名或积分获取权限。 |
| **AKShare (库)** | 免费 (开源) | 3-5秒 | 封装新浪/腾讯接口。零金钱成本，但易封 IP；无 WebSocket。 |
| **聚宽 / 米筐** | 2000元/年起 | < 1秒 | 专业量化平台。更适合严谨回测，而非轻量直播 Agent。 |

---

## 3. MVP 阶段专家建议

### 美股方案：**Alpaca (免费版)**
- 使用其 **IEX 数据流**。虽然 IEX 仅占全美交易量的 2-3%，但价格起伏是实时的且完全免费。对于一个注重“情绪和点评”的社交机器人，这点误差完全可以接受。

### A股方案：**iTick 或 AKShare**
- **iTick**：如果你追求毫秒级反应和 WebSocket 极简开发。
- **AKShare**：如果你追求零成本且能容忍几秒钟的延迟。由于 A 股波动率通常低于美股，3-5秒的延迟在社交点评场景下影响较小。

## 4. 整体延迟链分析
1. **行情源延迟**：数据中心推送到你的服务器 (WebSocket 极快)。
2. **决策延迟**：GPT-4o-mini 处理并输出文字 (1-3秒)。
3. **总体延迟**：预计从股价变动到 Agent 发出评论，总耗时在 **2-5秒**。这非常符合“人类观察并思考”的真实感。
